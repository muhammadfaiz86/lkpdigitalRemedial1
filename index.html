<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LKPD Digital K3LH</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    .question-card {
      transition: all 0.3s ease;
    }
    .question-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .loading-spinner {
      border: 3px solid #f3f4f6;
      border-top: 3px solid #3b82f6;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full bg-gradient-to-br from-blue-50 to-indigo-100 overflow-auto"><!-- View akan di-render di sini -->
  </div>
  <script>
    const config = {
      judul: "LKPD REMIDIAL 1",
      subtitle: "MEMAHAMI KONSEP DASAR K3LH DAN JENIS BAHAYA",
      mata_pelajaran: "Dasar-Dasar Teknik Mesin",
      materi: "Keselamatan dan Kesehatan Kerja serta Lingkungan Hidup (K3LH)",
      teacher_password: "modulsaya",
      background_color: "#F0F9FF",
      surface_color: "#FFFFFF",
      text_color: "#1E293B",
      primary_action_color: "#0EA5E9",
      secondary_action_color: "#64748B",
      font_family: "system-ui",
      font_size: 16
    };

    let currentView = 'student';
    let allSubmissions = [];

    // Load data dari localStorage
    function loadSubmissions() {
      const data = localStorage.getItem('lkpd_submissions');
      allSubmissions = data ? JSON.parse(data) : [];
    }

    // Save data ke localStorage
    function saveSubmissions() {
      localStorage.setItem('lkpd_submissions', JSON.stringify(allSubmissions));
    }

    function initApp() {
      loadSubmissions();
      renderStudentView();
    }

    function renderStudentView() {
      currentView = 'student';
      const customFont = config.font_family;
      const baseSize = config.font_size;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      
      document.getElementById('app').innerHTML = `
        <div class="w-full min-h-full p-4 md:p-8" style="background: ${config.background_color}; font-family: ${customFont}, ${baseFontStack}; font-size: ${baseSize}px;">
          <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <div class="text-center mb-2 pb-2" style="border-bottom: 3px solid ${config.primary_action_color};">
                <h1 class="font-bold mb-1" style="color: ${config.text_color}; font-size: ${baseSize * 1.5}px;">LEMBAR KERJA PESERTA DIDIK (LKPD)</h1>
                <h2 class="font-bold mb-1" style="color: ${config.text_color}; font-size: ${baseSize * 1.25}px;">PROGRAM REMIDIAL</h2>
                <h3 class="font-bold" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.1}px;">${config.judul}</h3>
                <p class="font-semibold mt-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">${config.subtitle}</p>
              </div>
              <div class="text-center mt-4" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">
                <p><strong>Mata Pelajaran:</strong> ${config.mata_pelajaran}</p>
                <p><strong>Materi:</strong> ${config.materi}</p>
                <p><strong>Kelas/Semester:</strong> X / Ganjil</p>
                <p><strong>Alokasi Waktu:</strong> 30 menit</p>
              </div>
              <div class="mt-4 text-center">
                <button onclick="showDashboardLogin()" class="text-sm underline" style="color: ${config.secondary_action_color}; font-size: ${baseSize * 0.85}px;">Dashboard Guru</button>
              </div>
            </div>

            <!-- Identitas Siswa -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.text_color}; font-size: ${baseSize * 1.25}px;">IDENTITAS SISWA</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <div>
                  <label class="block mb-1 font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Nama:</label>
                  <input type="text" id="nama" class="w-full p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Masukkan nama lengkap">
                </div>
                <div>
                  <label class="block mb-1 font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Kelas:</label>
                  <input type="text" id="kelas" class="w-full p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Contoh: X TKR 1">
                </div>
                <div>
                  <label class="block mb-1 font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">No. Absen:</label>
                  <input type="text" id="no_absen" class="w-full p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Masukkan nomor absen">
                </div>
                <div>
                  <label class="block mb-1 font-semibold" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Tanggal:</label>
                  <input type="date" id="tanggal" class="w-full p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;">
                </div>
              </div>
            </div>

            <!-- Petunjuk Pengerjaan -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.primary_action_color}10; border-left: 4px solid ${config.primary_action_color};">
              <h2 class="font-bold mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 1.1}px;">ðŸ“‹ PETUNJUK PENGERJAAN</h2>
              <ol class="space-y-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px; padding-left: 20px;">
                <li>1. Bacalah setiap instruksi dengan teliti!</li>
                <li>2. Kerjakan soal secara berurutan!</li>
                <li>3. Gunakan buku catatan atau modul sebagai referensi!</li>
                <li>4. Tanyakan kepada guru jika ada yang belum dipahami!</li>
                <li>5. Kerjakan dengan jujur dan teliti!</li>
              </ol>
            </div>

            <!-- Bagian A -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">BAGIAN A: KONSEP DASAR K3LH</h2>
              ${renderBagianA(config, baseSize)}
            </div>

            <!-- Bagian B -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">BAGIAN B: JENIS-JENIS BAHAYA</h2>
              ${renderBagianB(config, baseSize)}
            </div>

            <!-- Bagian C -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">BAGIAN C: ALAT PELINDUNG DIRI (APD)</h2>
              ${renderBagianC(config, baseSize)}
            </div>

            <!-- Refleksi -->
            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">REFLEKSI</h2>
              <div>
                <label class="font-semibold block mb-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">8. Setelah mempelajari materi ini, apa yang akan kamu lakukan agar tetap aman saat bekerja di bengkel?</label>
                <textarea id="refleksi" rows="5" class="w-full p-3 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Tulis refleksi Anda di sini..."></textarea>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="text-center mb-8">
              <button id="submitBtn" onclick="submitAnswers()" class="px-8 py-3 rounded-lg font-bold transition-all" style="background: ${config.primary_action_color}; color: white; font-size: ${baseSize}px;">
                Kirim Jawaban
              </button>
              <div id="submitStatus" class="mt-4"></div>
            </div>
          </div>
        </div>
      `;
    }

    function renderBagianA(config, baseSize) {
      return `
        <!-- Soal 1: Tabel Pengertian K3LH -->
        <div class="mb-6">
          <label class="font-semibold block mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">1. Lengkapilah tabel berikut tentang pengertian K3LH!</label>
          <div class="overflow-x-auto">
            <table class="w-full border-collapse" style="border: 1px solid ${config.secondary_action_color};">
              <thead>
                <tr style="background: ${config.primary_action_color}20;">
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Istilah</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Pengertian</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border p-2 font-semibold" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Keselamatan</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q1_keselamatan" class="w-full p-2 border rounded" style="font-size: ${baseSize * 0.85}px;" placeholder="Tulis pengertian..."></td>
                </tr>
                <tr>
                  <td class="border p-2 font-semibold" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Kesehatan</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q1_kesehatan" class="w-full p-2 border rounded" style="font-size: ${baseSize * 0.85}px;" placeholder="Tulis pengertian..."></td>
                </tr>
                <tr>
                  <td class="border p-2 font-semibold" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Kerja</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q1_kerja" class="w-full p-2 border rounded" style="font-size: ${baseSize * 0.85}px;" placeholder="Tulis pengertian..."></td>
                </tr>
                <tr>
                  <td class="border p-2 font-semibold" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Lingkungan Hidup</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q1_lingkungan" class="w-full p-2 border rounded" style="font-size: ${baseSize * 0.85}px;" placeholder="Tulis pengertian..."></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Soal 2: Tujuan K3LH -->
        <div class="mb-6">
          <label class="font-semibold block mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">2. Sebutkan 3 tujuan penerapan K3LH di bengkel pemesinan!</label>
          <div class="space-y-2">
            <div class="flex items-start">
              <span class="mr-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">a.</span>
              <input type="text" id="q2_a" class="flex-1 p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Tujuan pertama...">
            </div>
            <div class="flex items-start">
              <span class="mr-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">b.</span>
              <input type="text" id="q2_b" class="flex-1 p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Tujuan kedua...">
            </div>
            <div class="flex items-start">
              <span class="mr-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">c.</span>
              <input type="text" id="q2_c" class="flex-1 p-2 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Tujuan ketiga...">
            </div>
          </div>
        </div>

        <!-- Soal 3: Pentingnya K3LH -->
        <div class="mb-6">
          <label class="font-semibold block mb-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">3. Mengapa K3LH penting diterapkan di bengkel pemesinan? Jelaskan dengan bahasa sendiri!</label>
          <textarea id="q3" rows="4" class="w-full p-3 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;" placeholder="Tulis jawaban Anda di sini..."></textarea>
        </div>
      `;
    }

    function renderBagianB(config, baseSize) {
      return `
        <!-- Soal 4: Pasangkan Jenis Bahaya -->
        <div class="mb-6">
          <label class="font-semibold block mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">4. Pasangkan jenis bahaya dengan contohnya yang tepat!</label>
          <div class="overflow-x-auto">
            <table class="w-full border-collapse" style="border: 1px solid ${config.secondary_action_color};">
              <thead>
                <tr style="background: ${config.primary_action_color}20;">
                  <th class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px; width: 50px;">No</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Jenis Bahaya</th>
                  <th class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px; width: 120px;">Jawaban</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Contoh Bahaya</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">1.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Bahaya Fisik</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q4_1" class="w-full p-2 border rounded text-center" style="font-size: ${baseSize * 0.85}px;" placeholder="a/b/c/d"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">a. Asap las, debu logam</td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">2.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Bahaya Kimia</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q4_2" class="w-full p-2 border rounded text-center" style="font-size: ${baseSize * 0.85}px;" placeholder="a/b/c/d"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">b. Posisi kerja membungkuk</td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">3.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Bahaya Mekanik</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q4_3" class="w-full p-2 border rounded text-center" style="font-size: ${baseSize * 0.85}px;" placeholder="a/b/c/d"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">c. Kebisingan mesin</td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">4.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Bahaya Ergonomi</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q4_4" class="w-full p-2 border rounded text-center" style="font-size: ${baseSize * 0.85}px;" placeholder="a/b/c/d"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">d. Tangan terjepit mesin</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Soal 5: Identifikasi Bahaya -->
        <div class="mb-6">
          <label class="font-semibold block mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">5. Perhatikan gambar situasi bengkel berikut, kemudian identifikasi bahaya yang ada!</label>
          
          <!-- Situasi 1 -->
          <div class="mb-4 p-3 rounded" style="background: ${config.primary_action_color}10; border-left: 4px solid ${config.primary_action_color};">
            <p class="font-semibold mb-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Situasi 1:</p>
            <p class="mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Seorang siswa sedang menggerinda tanpa menggunakan kacamata safety. Lantai di sekitarnya licin karena tumpahan oli.</p>
            
            <div class="overflow-x-auto">
              <table class="w-full border-collapse mb-3" style="border: 1px solid ${config.secondary_action_color};">
                <thead>
                  <tr style="background: ${config.surface_color};">
                    <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Bahaya yang Teridentifikasi</th>
                    <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Kategori Bahaya</th>
                    <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Dampak yang Mungkin Terjadi</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s1_bahaya_a" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;" placeholder="a.">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s1_kategori_a" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s1_dampak_a" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                  </tr>
                  <tr>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s1_bahaya_b" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;" placeholder="b.">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s1_kategori_b" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s1_dampak_b" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Situasi 2 -->
          <div class="p-3 rounded" style="background: ${config.primary_action_color}10; border-left: 4px solid ${config.primary_action_color};">
            <p class="font-semibold mb-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Situasi 2:</p>
            <p class="mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Seorang siswa mengoperasikan mesin bubut dengan mengenakan baju berlengan panjang yang longgar dan tidak memakai sarung tangan.</p>
            
            <div class="overflow-x-auto">
              <table class="w-full border-collapse" style="border: 1px solid ${config.secondary_action_color};">
                <thead>
                  <tr style="background: ${config.surface_color};">
                    <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Bahaya yang Teridentifikasi</th>
                    <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Kategori Bahaya</th>
                    <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Dampak yang Mungkin Terjadi</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s2_bahaya_a" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;" placeholder="a.">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s2_kategori_a" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s2_dampak_a" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                  </tr>
                  <tr>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s2_bahaya_b" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;" placeholder="b.">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s2_kategori_b" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                    <td class="border p-2" style="border-color: ${config.secondary_action_color};">
                      <input type="text" id="q5_s2_dampak_b" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;">
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      `;
    }

    function renderBagianC(config, baseSize) {
      return `
        <!-- Soal 6: Tabel APD -->
        <div class="mb-6">
          <label class="font-semibold block mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">6. Lengkapilah tabel APD berikut!</label>
          <div class="overflow-x-auto">
            <table class="w-full border-collapse" style="border: 1px solid ${config.secondary_action_color};">
              <thead>
                <tr style="background: ${config.primary_action_color}20;">
                  <th class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px; width: 50px;">No</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Nama APD</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Fungsi</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Kapan Digunakan</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">1.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Helm Safety</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_fungsi_1" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_kapan_1" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">2.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_nama_2" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Melindungi mata dari serpihan logam</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_kapan_2" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">3.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Sarung Tangan</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_fungsi_3" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_kapan_3" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">4.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_nama_4" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Melindungi kaki dari benda jatuh</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_kapan_4" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">5.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Masker/Respirator</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_fungsi_5" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color};"><input type="text" id="q6_kapan_5" class="w-full p-1 border rounded" style="font-size: ${baseSize * 0.8}px;"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Soal 7: Benar/Salah APD -->
        <div class="mb-6">
          <label class="font-semibold block mb-3" style="color: ${config.text_color}; font-size: ${baseSize * 0.95}px;">7. Berilah tanda (âœ“) untuk penggunaan APD yang BENAR dan (âœ—) untuk yang SALAH!</label>
          <div class="overflow-x-auto">
            <table class="w-full border-collapse" style="border: 1px solid ${config.secondary_action_color};">
              <thead>
                <tr style="background: ${config.primary_action_color}20;">
                  <th class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px; width: 50px;">No</th>
                  <th class="border p-2 text-left" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Pernyataan</th>
                  <th class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.9}px; width: 120px;">Benar/Salah</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">a.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Sarung tangan boleh dipakai saat mengoperasikan mesin bubut</td>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color};"><input type="text" id="q7_a" class="w-full p-1 border rounded text-center" style="font-size: ${baseSize * 0.8}px;" placeholder="âœ“ atau âœ—"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">b.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Kacamata safety wajib dipakai saat menggerinda</td>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color};"><input type="text" id="q7_b" class="w-full p-1 border rounded text-center" style="font-size: ${baseSize * 0.8}px;" placeholder="âœ“ atau âœ—"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">c.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Sepatu sandal boleh dipakai di bengkel</td>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color};"><input type="text" id="q7_c" class="w-full p-1 border rounded text-center" style="font-size: ${baseSize * 0.8}px;" placeholder="âœ“ atau âœ—"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">d.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Masker kain cukup efektif untuk menyaring debu logam</td>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color};"><input type="text" id="q7_d" class="w-full p-1 border rounded text-center" style="font-size: ${baseSize * 0.8}px;" placeholder="âœ“ atau âœ—"></td>
                </tr>
                <tr>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">e.</td>
                  <td class="border p-2" style="border-color: ${config.secondary_action_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Helm safety melindungi kepala dari benda jatuh</td>
                  <td class="border p-2 text-center" style="border-color: ${config.secondary_action_color};"><input type="text" id="q7_e" class="w-full p-1 border rounded text-center" style="font-size: ${baseSize * 0.8}px;" placeholder="âœ“ atau âœ—"></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      `;
    }

    function submitAnswers() {
      const submitBtn = document.getElementById('submitBtn');
      const statusDiv = document.getElementById('submitStatus');

      const nama = document.getElementById('nama').value.trim();
      const kelas = document.getElementById('kelas').value.trim();
      const no_absen = document.getElementById('no_absen').value.trim();
      const tanggal = document.getElementById('tanggal').value;

      if (!nama || !kelas || !no_absen || !tanggal) {
        statusDiv.innerHTML = `<p class="text-red-600">Mohon lengkapi semua identitas siswa terlebih dahulu!</p>`;
        return;
      }

      submitBtn.disabled = true;
      submitBtn.innerHTML = '<div class="loading-spinner mx-auto"></div>';

      // Bagian A: Konsep Dasar K3LH
      const bagian_a = {
        q1_keselamatan: document.getElementById('q1_keselamatan')?.value || '',
        q1_kesehatan: document.getElementById('q1_kesehatan')?.value || '',
        q1_kerja: document.getElementById('q1_kerja')?.value || '',
        q1_lingkungan: document.getElementById('q1_lingkungan')?.value || '',
        q2_a: document.getElementById('q2_a')?.value || '',
        q2_b: document.getElementById('q2_b')?.value || '',
        q2_c: document.getElementById('q2_c')?.value || '',
        q3: document.getElementById('q3')?.value || ''
      };

      // Bagian B: Jenis-jenis Bahaya
      const bagian_b = {
        q4_1: document.getElementById('q4_1')?.value || '',
        q4_2: document.getElementById('q4_2')?.value || '',
        q4_3: document.getElementById('q4_3')?.value || '',
        q4_4: document.getElementById('q4_4')?.value || '',
        q5_s1_bahaya_a: document.getElementById('q5_s1_bahaya_a')?.value || '',
        q5_s1_kategori_a: document.getElementById('q5_s1_kategori_a')?.value || '',
        q5_s1_dampak_a: document.getElementById('q5_s1_dampak_a')?.value || '',
        q5_s1_bahaya_b: document.getElementById('q5_s1_bahaya_b')?.value || '',
        q5_s1_kategori_b: document.getElementById('q5_s1_kategori_b')?.value || '',
        q5_s1_dampak_b: document.getElementById('q5_s1_dampak_b')?.value || '',
        q5_s2_bahaya_a: document.getElementById('q5_s2_bahaya_a')?.value || '',
        q5_s2_kategori_a: document.getElementById('q5_s2_kategori_a')?.value || '',
        q5_s2_dampak_a: document.getElementById('q5_s2_dampak_a')?.value || '',
        q5_s2_bahaya_b: document.getElementById('q5_s2_bahaya_b')?.value || '',
        q5_s2_kategori_b: document.getElementById('q5_s2_kategori_b')?.value || '',
        q5_s2_dampak_b: document.getElementById('q5_s2_dampak_b')?.value || ''
      };

      // Bagian C: APD
      const bagian_c = {
        q6_fungsi_1: document.getElementById('q6_fungsi_1')?.value || '',
        q6_kapan_1: document.getElementById('q6_kapan_1')?.value || '',
        q6_nama_2: document.getElementById('q6_nama_2')?.value || '',
        q6_kapan_2: document.getElementById('q6_kapan_2')?.value || '',
        q6_fungsi_3: document.getElementById('q6_fungsi_3')?.value || '',
        q6_kapan_3: document.getElementById('q6_kapan_3')?.value || '',
        q6_nama_4: document.getElementById('q6_nama_4')?.value || '',
        q6_kapan_4: document.getElementById('q6_kapan_4')?.value || '',
        q6_fungsi_5: document.getElementById('q6_fungsi_5')?.value || '',
        q6_kapan_5: document.getElementById('q6_kapan_5')?.value || '',
        q7_a: document.getElementById('q7_a')?.value || '',
        q7_b: document.getElementById('q7_b')?.value || '',
        q7_c: document.getElementById('q7_c')?.value || '',
        q7_d: document.getElementById('q7_d')?.value || '',
        q7_e: document.getElementById('q7_e')?.value || ''
      };

      // Refleksi
      const refleksi = document.getElementById('refleksi')?.value || '';

      const submission = {
        id: Date.now().toString(),
        nama,
        kelas,
        no_absen,
        tanggal,
        bagian_a: bagian_a,
        bagian_b: bagian_b,
        bagian_c: bagian_c,
        refleksi: refleksi,
        timestamp: new Date().toISOString()
      };

      allSubmissions.push(submission);
      saveSubmissions();

      statusDiv.innerHTML = `<div class="p-4 rounded" style="background: ${config.primary_action_color}20; color: ${config.primary_action_color};"><p class="font-semibold">âœ“ Jawaban berhasil dikirim!</p><p class="text-sm mt-1">Terima kasih telah mengerjakan LKPD Remidial K3LH.</p></div>`;
      
      setTimeout(() => {
        window.scrollTo(0, 0);
        renderStudentView();
      }, 2000);
    }

    function showDashboardLogin() {
      const baseSize = config.font_size;
      
      document.getElementById('app').innerHTML = `
        <div class="w-full h-full flex items-center justify-center p-4" style="background: ${config.background_color};">
          <div class="w-full max-w-md question-card rounded-lg p-8" style="background: ${config.surface_color}; box-shadow: 0 4px 16px rgba(0,0,0,0.1);">
            <h2 class="font-bold text-center mb-6" style="color: ${config.text_color}; font-size: ${baseSize * 1.5}px;">Dashboard Guru</h2>
            <div class="space-y-4">
              <div>
                <label class="block mb-2" style="color: ${config.text_color}; font-size: ${baseSize * 0.9}px;">Password:</label>
                <input type="password" id="teacherPassword" class="w-full p-3 border rounded" style="border-color: ${config.secondary_action_color}; font-size: ${baseSize}px;" placeholder="Masukkan password">
              </div>
              <div id="loginError" class="text-red-600 text-sm"></div>
              <button onclick="verifyPassword()" class="w-full py-3 rounded-lg font-bold transition-all" style="background: ${config.primary_action_color}; color: white; font-size: ${baseSize}px;">
                Masuk
              </button>
              <button onclick="renderStudentView()" class="w-full py-2 text-center underline" style="color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;">
                Kembali ke LKPD
              </button>
            </div>
          </div>
        </div>
      `;

      document.getElementById('teacherPassword').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          verifyPassword();
        }
      });
    }

    function verifyPassword() {
      const password = document.getElementById('teacherPassword').value;

      if (password === config.teacher_password) {
        renderDashboard();
      } else {
        document.getElementById('loginError').textContent = 'Password salah. Silakan coba lagi.';
      }
    }

    function renderDashboard() {
      currentView = 'dashboard';
      loadSubmissions();
      
      const customFont = config.font_family;
      const baseSize = config.font_size;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';

      document.getElementById('app').innerHTML = `
        <div class="w-full min-h-full p-4 md:p-8" style="background: ${config.background_color}; font-family: ${customFont}, ${baseFontStack}; font-size: ${baseSize}px;">
          <div class="max-w-6xl mx-auto">
            <div class="flex justify-between items-center mb-6">
              <h1 class="font-bold" style="color: ${config.text_color}; font-size: ${baseSize * 1.75}px;">Dashboard Guru</h1>
              <button onclick="renderStudentView()" class="px-4 py-2 rounded" style="background: ${config.secondary_action_color}; color: white; font-size: ${baseSize * 0.9}px;">
                Keluar
              </button>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="p-4 rounded" style="background: ${config.primary_action_color}20;">
                  <p style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Total Siswa Mengerjakan</p>
                  <p class="font-bold mt-1" style="color: ${config.primary_action_color}; font-size: ${baseSize * 2}px;">${allSubmissions.length}</p>
                </div>
                <div class="p-4 rounded" style="background: ${config.secondary_action_color}20;">
                  <p style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Terakhir Disubmit</p>
                  <p class="font-bold mt-1" style="color: ${config.secondary_action_color}; font-size: ${baseSize}px;">${allSubmissions.length > 0 ? new Date(allSubmissions[allSubmissions.length - 1].timestamp).toLocaleString('id-ID') : '-'}</p>
                </div>
                <div class="p-4 rounded" style="background: ${config.primary_action_color}10;">
                  <p style="color: ${config.text_color}; font-size: ${baseSize * 0.85}px;">Data Tersimpan</p>
                  <p class="font-bold mt-1" style="color: ${config.text_color}; font-size: ${baseSize}px;">${allSubmissions.length} jawaban</p>
                </div>
              </div>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <div class="flex justify-between items-center mb-4">
                <h2 class="font-bold" style="color: ${config.text_color}; font-size: ${baseSize * 1.25}px;">Daftar Jawaban Siswa</h2>
                <button onclick="clearAllData()" class="px-4 py-2 rounded text-white text-sm" style="background: #EF4444;">
                  Hapus Semua Data
                </button>
              </div>
              ${allSubmissions.length === 0 ? `
                <p class="text-center py-8" style="color: ${config.secondary_action_color}; font-size: ${baseSize * 0.9}px;">Belum ada siswa yang mengerjakan</p>
              ` : `
                <div class="overflow-x-auto">
                  <table class="w-full" style="font-size: ${baseSize * 0.85}px;">
                    <thead>
                      <tr style="border-bottom: 2px solid ${config.secondary_action_color};">
                        <th class="text-left p-3" style="color: ${config.text_color};">No</th>
                        <th class="text-left p-3" style="color: ${config.text_color};">Nama</th>
                        <th class="text-left p-3" style="color: ${config.text_color};">Kelas</th>
                        <th class="text-left p-3" style="color: ${config.text_color};">No. Absen</th>
                        <th class="text-left p-3" style="color: ${config.text_color};">Waktu Submit</th>
                        <th class="text-center p-3" style="color: ${config.text_color};">Aksi</th>
                      </tr>
                    </thead>
                    <tbody>
                      ${allSubmissions.map((sub, idx) => `
                        <tr style="border-bottom: 1px solid ${config.secondary_action_color}20;">
                          <td class="p-3" style="color: ${config.text_color};">${idx + 1}</td>
                          <td class="p-3" style="color: ${config.text_color};">${sub.nama}</td>
                          <td class="p-3" style="color: ${config.text_color};">${sub.kelas}</td>
                          <td class="p-3" style="color: ${config.text_color};">${sub.no_absen}</td>
                          <td class="p-3" style="color: ${config.text_color};">${new Date(sub.timestamp).toLocaleString('id-ID')}</td>
                          <td class="p-3 text-center">
                            <button onclick="viewSubmission('${sub.id}')" class="px-3 py-1 rounded text-white mr-2" style="background: ${config.primary_action_color}; font-size: ${baseSize * 0.8}px;">
                              Lihat Detail
                            </button>
                            <button onclick="deleteSubmission('${sub.id}')" class="px-3 py-1 rounded text-white" style="background: #EF4444; font-size: ${baseSize * 0.8}px;">
                              Hapus
                            </button>
                          </td>
                        </tr>
                      `).join('')}
                    </tbody>
                  </table>
                </div>
              `}
            </div>
          </div>
        </div>
      `;
    }

    function deleteSubmission(id) {
      if (confirm('Apakah Anda yakin ingin menghapus data ini?')) {
        allSubmissions = allSubmissions.filter(s => s.id !== id);
        saveSubmissions();
        renderDashboard();
      }
    }

    function clearAllData() {
      if (confirm('Apakah Anda yakin ingin menghapus SEMUA data jawaban siswa? Tindakan ini tidak dapat dibatalkan!')) {
        allSubmissions = [];
        saveSubmissions();
        renderDashboard();
      }
    }

    function viewSubmission(id) {
      const submission = allSubmissions.find(s => s.id === id);
      if (!submission) return;

      const customFont = config.font_family;
      const baseSize = config.font_size;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';

      const bagian_a = submission.bagian_a;
      const bagian_b = submission.bagian_b;
      const bagian_c = submission.bagian_c;
      const refleksi = submission.refleksi || '';

      document.getElementById('app').innerHTML = `
        <div class="w-full min-h-full p-4 md:p-8" style="background: ${config.background_color}; font-family: ${customFont}, ${baseFontStack}; font-size: ${baseSize}px;">
          <div class="max-w-4xl mx-auto">
            <div class="flex justify-between items-center mb-6">
              <h1 class="font-bold" style="color: ${config.text_color}; font-size: ${baseSize * 1.5}px;">Detail Jawaban Siswa</h1>
              <button onclick="renderDashboard()" class="px-4 py-2 rounded" style="background: ${config.secondary_action_color}; color: white; font-size: ${baseSize * 0.9}px;">
                Kembali
              </button>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.text_color}; font-size: ${baseSize * 1.25}px;">Identitas Siswa</h2>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4" style="font-size: ${baseSize * 0.9}px;">
                <div><strong style="color: ${config.text_color};">Nama:</strong> <span style="color: ${config.text_color};">${submission.nama}</span></div>
                <div><strong style="color: ${config.text_color};">Kelas:</strong> <span style="color: ${config.text_color};">${submission.kelas}</span></div>
                <div><strong style="color: ${config.text_color};">No. Absen:</strong> <span style="color: ${config.text_color};">${submission.no_absen}</span></div>
                <div><strong style="color: ${config.text_color};">Tanggal:</strong> <span style="color: ${config.text_color};">${submission.tanggal || '-'}</span></div>
                <div class="md:col-span-2"><strong style="color: ${config.text_color};">Waktu Submit:</strong> <span style="color: ${config.text_color};">${new Date(submission.timestamp).toLocaleString('id-ID')}</span></div>
              </div>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">Bagian A: Konsep Dasar K3LH</h2>
              <div class="space-y-3" style="font-size: ${baseSize * 0.85}px;">
                ${Object.entries(bagian_a).map(([key, value]) => `
                  <div style="color: ${config.text_color}; border-bottom: 1px solid ${config.secondary_action_color}20; padding-bottom: 8px;">
                    <span class="font-semibold">${key.replace(/_/g, ' ').toUpperCase()}:</span><br/>
                    <span style="color: ${config.text_color}; margin-left: 8px;">${value || '<em style="color: ' + config.secondary_action_color + ';">Tidak dijawab</em>'}</span>
                  </div>
                `).join('')}
              </div>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">Bagian B: Jenis-jenis Bahaya</h2>
              <div class="space-y-3" style="font-size: ${baseSize * 0.85}px;">
                ${Object.entries(bagian_b).map(([key, value]) => `
                  <div style="color: ${config.text_color}; border-bottom: 1px solid ${config.secondary_action_color}20; padding-bottom: 8px;">
                    <span class="font-semibold">${key.replace(/_/g, ' ').toUpperCase()}:</span><br/>
                    <span style="color: ${config.text_color}; margin-left: 8px;">${value || '<em style="color: ' + config.secondary_action_color + ';">Tidak dijawab</em>'}</span>
                  </div>
                `).join('')}
              </div>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">Bagian C: Alat Pelindung Diri (APD)</h2>
              <div class="space-y-3" style="font-size: ${baseSize * 0.85}px;">
                ${Object.entries(bagian_c).map(([key, value]) => `
                  <div style="color: ${config.text_color}; border-bottom: 1px solid ${config.secondary_action_color}20; padding-bottom: 8px;">
                    <span class="font-semibold">${key.replace(/_/g, ' ').toUpperCase()}:</span><br/>
                    <span style="color: ${config.text_color}; margin-left: 8px;">${value || '<em style="color: ' + config.secondary_action_color + ';">Tidak dijawab</em>'}</span>
                  </div>
                `).join('')}
              </div>
            </div>

            <div class="question-card rounded-lg p-6 mb-6" style="background: ${config.surface_color}; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <h2 class="font-bold mb-4" style="color: ${config.primary_action_color}; font-size: ${baseSize * 1.25}px;">Refleksi</h2>
              <div class="p-3 rounded" style="background: ${config.background_color}; color: ${config.text_color}; font-size: ${baseSize * 0.85}px; white-space: pre-wrap;">${refleksi || '<em style="color: ' + config.secondary_action_color + ';">Tidak dijawab</em>'}</div>
            </div>
          </div>
        </div>
      `;
    }

    // Initialize app when page loads
    window.addEventListener('DOMContentLoaded', initApp);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ab48dc4868e6032',t:'MTc2NTI4Mzg0Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>